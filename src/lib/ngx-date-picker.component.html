<div class="calendar-input-wrapper">
    <div class="input-group">
        <input 
            id="date-picker-input"
            #inputElement 
            type="text" 
            class="calendar-input" 
            [value]="displayValue()" 
            (focus)="openPopover()"
            [placeholder]="placeholder()" 
            [disabled]="disabled()" 
            readonly 
            aria-label="Select date" />
    </div>

    @if (isOpen()) {
    <div class="popover-overlay" (click)="closePopover()"></div>
    <div class="popover-container">
        <ngx-calendar 
            [selectionMode]="selectionMode()" 
            [disabledDates]="disabledDates()" 
            [minDate]="minDate()"
            [maxDate]="maxDate()" 
            [showOtherMonthDays]="showOtherMonthDays()" 
            [highlightToday]="highlightToday()"
            [allowPastDates]="allowPastDates()" 
            [allowFutureDates]="allowFutureDates()"
            [disableWeekends]="disableWeekends()"
            [customWeekdayNames]="customWeekdayNames()"
            [startOfWeek]="startOfWeek()"
            [monthsToShow]="monthsToShow()"
            [preSelectedDate]="preSelectedDate() || selectedDate()"
            [preSelectedDates]="preSelectedDates() && preSelectedDates().length > 0 ? preSelectedDates() : selectedDates()"
            [preSelectedRange]="preSelectedRange() || selectedRange()"
            [showTodayBtn]="showTodayBtn()"
            [showClearBtn]="showClearBtn()"
            [preMonthTextBtn]="preMonthTextBtn()"
            [nextMonthBtnText]="nextMonthBtnText()"
            [preMonthBtnIcon]="preMonthBtnIcon()"
            [nextMonthBtnIcon]="nextMonthBtnIcon()"
            (dateSelected)="onDateSelected($event)"
            (datesSelected)="onDatesSelected($event)" 
            (dateRangeSelected)="onDateRangeSelected($event)"
            (clearSelection)="clearSelection()"
            (click)="$event.stopPropagation()"/>
    </div>
    }
</div>